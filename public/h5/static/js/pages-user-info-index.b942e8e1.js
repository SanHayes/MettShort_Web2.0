(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-info-index"],{3333:function(t,e,a){"use strict";var n=a("ed9b"),i=a.n(n);i.a},8612:function(t,e,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("ac1f"),a("00b4"),a("b64b");var i=n(a("5530")),o=n(a("9cf4")),r=n(a("2eb0")),s=a("26cb"),c={components:{CustomAreaCode:o.default},data:function(){return{buttonStyleDisable:{width:"300rpx",height:"80rpx",border:"none",fontSize:"24rpx",color:"#fff",background:"#E0E0E0",borderRadius:"14rpx",margin:"0",fontWeight:"bold"},buttonStyle:{width:"300rpx",height:"80rpx",border:"none",fontSize:"24rpx",color:"#fff",background:"#EE7F33",borderRadius:"14rpx",margin:"0",fontWeight:"bold"},userInfo:{},user:{avatar:"",nickname:"",mobile:"",parent_id:"",email:""},uploadAvatar:"",referrerPopup:!1,referrerId:"",mobilePopup:!1,emailPopup:!1,codeTips:"",form:{mobile:"",code:"",email:"",area:""},isAreaShow:!1}},computed:(0,i.default)({},(0,s.mapGetters)("user",["token"])),onLoad:function(){this.getPageData()},onUnload:function(){this.saveUserInfo()},methods:(0,i.default)((0,i.default)({},(0,s.mapActions)("user",["logout","getUserInfo"])),{},{emailConfirm:function(){var t=this;if(!this.form.email)return this.$u.toast(this.$t("text.input.email"));if(!this.$u.test.email(this.form.email))return this.$u.toast(this.$t("text.format.email"));if(!this.$u.test.code(this.form.code,6))return this.$u.toast(this.$t("text.input.captcha"));var e={email:this.form.email,captcha:this.form.code};this.$request("login.bindEmail",e).then((function(e){1===e.code?(t.$u.toast(e.msg),t.emailPopup=!1,t.getPageData()):t.emailPopup=!1})).catch((function(e){t.emailPopup=!1}))},mobileConfirm:function(){var t=this;if(!this.form.area)return this.$u.toast(this.$t("text.select.countrycode"));if(!this.form.mobile)return this.$u.toast(this.$t("text.input.mobile"));if(!this.$u.test.code(this.form.code,6))return this.$u.toast(this.$t("text.input.captcha"));var e={mobile:this.form.mobile,captcha:this.form.code,nation_code:this.form.area||""};this.$request("login.bindMobile",e).then((function(e){1===e.code?(t.$u.toast(e.msg),t.mobilePopup=!1,t.getPageData()):t.mobilePopup=!1})).catch((function(e){t.mobilePopup=!1}))},referrerConfirm:function(){var t=this;this.referrerId&&this.$request("dealer.superior",{id:this.referrerId,platform:this.$utils.platforms()}).then((function(e){1===e.code?(t.$u.toast(e.msg),t.referrerPopup=!1,t.getPageData()):t.referrerPopup=!1})).catch((function(e){t.referrerPopup=!1}))},codeChange:function(t){this.codeTips=t},getCode:function(t){var e=this;if("email"==t){if(!this.form.email)return this.$u.toast(this.$t("text.input.email"));if(!this.$u.test.email(this.form.email))return this.$u.toast(this.$t("text.format.email"))}else{if(!this.form.area)return this.$u.toast(this.$t("text.select.countrycode"));if(!this.form.mobile)return this.$u.toast(this.$t("text.input.mobile"))}var a={account:"email"==t?this.form.email:this.form.mobile,nation_code:"mobile"==t?this.form.area:"",event:"changemobile"};this.$refs.uCode.canGetCode?(uni.showLoading({}),this.$request("login.sendCode",a,!1).then((function(t){1===t.code?(uni.hideLoading(),uni.$u.toast(e.$t("text.captcha.send")),e.$refs.uCode.start()):(uni.hideLoading(),uni.$u.toast(t.msg))})).catch((function(t){uni.hideLoading(),uni.$u.toast(e.$t("text.captcha.error"))}))):uni.$u.toast(this.$t("text.captcha.resend"))},getPageData:function(){var t=this;this.getUserInfo().then((function(e){1===e.code&&(t.userInfo=e.data,t.user.avatar=e.data.avatar,t.user.nickname=e.data.nickname,t.user.mobile=e.data.mobile,t.user.email=e.data.email,e.data.parent_id&&(t.user.parent_id=e.data.parent_id))}))},changeAvatar:function(){var t=this;uni.chooseImage({success:function(e){var a=e.tempFilePaths;t.uploadFile(a[0])}})},onChooseAvatar:function(t){this.uploadFile(t.detail.avatarUrl)},uploadFile:function(t){var e=this;t&&(uni.showLoading({mask:!0}),uni.uploadFile({url:this.$BASE_URL+r.default.common.upload.url,filePath:t,name:"file",header:{Token:this.token||"",Sign:this.$SIGN||""},success:function(t){if(200==t.statusCode){var a=JSON.parse(t.data);1===a.code&&(e.user.avatar=a.data.fullurl,e.uploadAvatar=a.data.url)}uni.hideLoading()},fail:function(t){uni.hideLoading()}}))},saveUserInfo:function(){var t={};this.userInfo.nickname!=this.user.nickname&&this.user.nickname&&(t.nickname=this.user.nickname),this.userInfo.avatar!=this.user.avatar&&this.uploadAvatar&&(t.avatar=this.uploadAvatar),0!==Object.keys(t).length&&this.$request("user.updateInfo",t).then((function(t){1===t.code&&uni.$emit("updateUserInfo",!0)}))}})};e.default=c},"8eb4":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var n={uPopup:a("5fa0").default,uInput:a("83aa").default,uButton:a("5e97").default,uIcon:a("5f9d").default,uCode:a("fd5a").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page_content"},[a("v-uni-view",{staticClass:"head_content"},[a("CustomNavbar",{attrs:{title:t.$t("navbar.userinfo")}})],1),a("v-uni-view",{staticClass:"main_content"},[a("v-uni-view",{staticClass:"wrapper"},[a("v-uni-view",{staticClass:"label"},[t._v(t._s(t.$t("text.avatar")))]),a("v-uni-view",{staticClass:"content"},[a("v-uni-button",{staticClass:"avatar",attrs:{type:"default","open-type":"chooseAvatar"},on:{chooseavatar:function(e){arguments[0]=e=t.$handleEvent(e),t.onChooseAvatar.apply(void 0,arguments)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeAvatar.apply(void 0,arguments)}}},[a("v-uni-image",{staticClass:"image",attrs:{src:t.user.avatar,mode:"aspectFill"}})],1),a("v-uni-image",{staticClass:"arrow",attrs:{src:"https://img.nymaite.com/video_short/icons/arrow.png",mode:"widthFix"}})],1)],1),a("v-uni-view",{staticClass:"wrapper"},[a("v-uni-view",{staticClass:"label"},[t._v(t._s(t.$t("text.nickname")))]),a("v-uni-view",{staticClass:"content"},[a("v-uni-input",{staticClass:"nickname",attrs:{type:"nickname",placeholder:t.$t("text.input.nickname"),"placeholder-class":"placeholder"},model:{value:t.user.nickname,callback:function(e){t.$set(t.user,"nickname",e)},expression:"user.nickname"}}),a("v-uni-image",{staticClass:"arrow",attrs:{src:"https://img.nymaite.com/video_short/icons/arrow.png",mode:"widthFix"}})],1)],1),a("v-uni-view",{staticClass:"wrapper"},[a("v-uni-view",{staticClass:"label"},[t._v(t._s(t.$t("text.email")))]),a("v-uni-view",{staticClass:"content",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.emailPopup=!0}}},[a("v-uni-input",{staticClass:"mobile",staticStyle:{"pointer-events":"none"},attrs:{value:t.user.email,type:"text",placeholder:t.$t("text.bind.email"),"placeholder-class":"placeholder",disabled:!0}}),a("v-uni-image",{staticClass:"arrow",attrs:{src:"https://img.nymaite.com/video_short/icons/arrow.png",mode:"widthFix"}})],1)],1),a("v-uni-view",{staticClass:"wrapper"},[a("v-uni-view",{staticClass:"label"},[t._v(t._s(t.$t("text.mobile")))]),a("v-uni-view",{staticClass:"content",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.mobilePopup=!0}}},[a("v-uni-input",{staticClass:"mobile",staticStyle:{"pointer-events":"none"},attrs:{value:t.user.mobile,type:"number",placeholder:t.$t("text.bind.mobile"),"placeholder-class":"placeholder",disabled:!0}}),a("v-uni-image",{staticClass:"arrow",attrs:{src:"https://img.nymaite.com/video_short/icons/arrow.png",mode:"widthFix"}})],1)],1),a("v-uni-view",{staticClass:"wrapper"},[a("v-uni-view",{staticClass:"label"},[t._v(t._s(t.$t("text.referrer")))]),t.user.parent_id?a("v-uni-view",{staticClass:"content"},[a("v-uni-input",{staticClass:"mobile",attrs:{value:t.user.parent_id,type:"number",disabled:!0}})],1):a("v-uni-view",{staticClass:"content",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.referrerPopup=!0}}},[a("v-uni-input",{staticClass:"mobile",staticStyle:{"pointer-events":"none"},attrs:{type:"number",placeholder:t.$t("text.bind.recommend"),"placeholder-class":"placeholder",disabled:!0}}),a("v-uni-image",{staticClass:"arrow",attrs:{src:"https://img.nymaite.com/video_short/icons/arrow.png",mode:"widthFix"}})],1)],1),a("u-popup",{attrs:{show:t.emailPopup,round:20,closeable:!0,closeOnClickOverlay:!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.emailPopup=!1}}},[a("v-uni-view",{staticClass:"mobile_popup"},[a("v-uni-view",{staticClass:"input_box"},[a("v-uni-text",{staticClass:"label"},[t._v(t._s(t.$t("text.email")))]),a("u-input",{attrs:{type:"text",border:"none",cursorSpacing:200,clearable:!0,placeholder:t.$t("text.input.email")},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("v-uni-view",{staticClass:"input_box"},[a("v-uni-text",{staticClass:"label"},[t._v(t._s(t.$t("text.captcha")))]),a("u-input",{attrs:{type:"number",maxlength:6,border:"none",cursorSpacing:200,clearable:!0,placeholder:t.$t("text.input.captcha")},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}}),a("v-uni-view",{staticClass:"send",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCode("email")}}},[t._v(t._s(t.codeTips))])],1),a("v-uni-view",{staticClass:"button_box"},[a("u-button",{attrs:{text:t.$t("text.cancel"),customStyle:t.buttonStyleDisable},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.emailPopup=!1}}}),a("u-button",{attrs:{text:t.$t("text.confirm"),customStyle:t.buttonStyle},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.emailConfirm.apply(void 0,arguments)}}})],1)],1)],1),a("u-popup",{attrs:{show:t.mobilePopup,round:20,closeable:!0,closeOnClickOverlay:!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.mobilePopup=!1}}},[a("v-uni-view",{staticClass:"mobile_popup"},[a("v-uni-view",{staticClass:"input_box"},[a("v-uni-text",{staticClass:"label"},[t._v(t._s(t.$t("text.mobile")))]),a("v-uni-view",{staticClass:"area",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isAreaShow=!0}}},[a("v-uni-view",{staticClass:"tlabel"},[a("v-uni-view",{staticClass:"text1"},[t._v(t._s(t.$t("text.countrycode")))]),t.form.area?a("v-uni-view",{staticClass:"text2"},[t._v("+"+t._s(t.form.area))]):t._e()],1),a("u-icon",{attrs:{name:"arrow-down-fill",color:"#ccc",size:"12"}})],1),a("u-input",{attrs:{type:"number",border:"none",cursorSpacing:200,clearable:!0,placeholder:t.$t("text.input.mobile")},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1),a("v-uni-view",{staticClass:"input_box"},[a("v-uni-text",{staticClass:"label"},[t._v(t._s(t.$t("text.captcha")))]),a("u-input",{attrs:{type:"number",maxlength:6,border:"none",cursorSpacing:200,clearable:!0,placeholder:t.$t("text.input.captcha")},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}}),a("v-uni-view",{staticClass:"send",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCode("mobile")}}},[t._v(t._s(t.codeTips))])],1),a("v-uni-view",{staticClass:"button_box"},[a("u-button",{attrs:{text:t.$t("text.cancel"),customStyle:t.buttonStyleDisable},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.mobilePopup=!1}}}),a("u-button",{attrs:{text:t.$t("text.confirm"),customStyle:t.buttonStyle},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.mobileConfirm.apply(void 0,arguments)}}})],1)],1)],1),a("u-code",{ref:"uCode",attrs:{uniqueKey:"info-code",keepRunning:!0,seconds:60,startText:t.$t("text.getcode"),changeText:"Xs",endText:t.$t("text.recode")},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.codeChange.apply(void 0,arguments)}}}),a("u-popup",{attrs:{show:t.referrerPopup,round:20,closeable:!0,closeOnClickOverlay:!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.referrerPopup=!1}}},[a("v-uni-view",{staticClass:"mobile_popup"},[a("v-uni-view",{staticClass:"input_box"},[a("v-uni-text",{staticClass:"label"},[t._v(t._s(t.$t("text.referrer")))]),a("u-input",{attrs:{type:"number",border:"none",cursorSpacing:200,clearable:!0,placeholder:t.$t("text.input.recommendid")},model:{value:t.referrerId,callback:function(e){t.referrerId=e},expression:"referrerId"}})],1),a("v-uni-view",{staticClass:"button_box"},[a("u-button",{attrs:{text:t.$t("text.cancel"),customStyle:t.buttonStyleDisable},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.referrerPopup=!1}}}),a("u-button",{attrs:{text:t.$t("text.confirm"),customStyle:t.buttonStyle},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.referrerConfirm.apply(void 0,arguments)}}})],1)],1)],1),a("CustomAreaCode",{attrs:{show:t.isAreaShow},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.isAreaShow=!1},code:function(e){arguments[0]=e=t.$handleEvent(e),t.form.area=e}}})],1)],1)},o=[]},9042:function(t,e,a){"use strict";a.r(e);var n=a("8612"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},a7ea:function(t,e,a){"use strict";a.r(e);var n=a("8eb4"),i=a("9042");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("3333");var r=a("f0c5"),s=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"17ebaca9",null,!1,n["a"],void 0);e["default"]=s.exports},d632:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.page_content .main_content[data-v-17ebaca9]{padding:%?40?%;overflow-y:auto}.page_content .main_content .wrapper[data-v-17ebaca9]{height:%?100?%;font-size:%?32?%;display:flex;align-items:center;justify-content:space-between}.page_content .main_content .wrapper .label[data-v-17ebaca9]{color:#000;white-space:nowrap}.page_content .main_content .wrapper .content[data-v-17ebaca9]{display:flex;align-items:center;color:#999}.page_content .main_content .wrapper .content .avatar[data-v-17ebaca9]{width:%?100?%;height:%?100?%;border-radius:50%;overflow:hidden;background:transparent}.page_content .main_content .wrapper .content .avatar .image[data-v-17ebaca9]{width:100%;height:100%;border-radius:50%}.page_content .main_content .wrapper .content .arrow[data-v-17ebaca9]{width:%?40?%;margin-left:%?10?%}.page_content .main_content .wrapper .content .nickname[data-v-17ebaca9],\r\n.page_content .main_content .wrapper .content .mobile[data-v-17ebaca9]{font-size:%?32?%;color:#999;text-align:right}.page_content .mobile_popup[data-v-17ebaca9]{padding:%?70?% %?40?% %?40?% %?40?%}.page_content .mobile_popup .input_box[data-v-17ebaca9]{height:%?120?%;position:relative;display:flex;align-items:center}.page_content .mobile_popup .input_box .label[data-v-17ebaca9]{font-size:%?32?%;color:#000;white-space:nowrap;margin-right:%?20?%}.page_content .mobile_popup .input_box .area[data-v-17ebaca9]{display:flex;align-items:center;padding-right:%?12?%}.page_content .mobile_popup .input_box .area .tlabel[data-v-17ebaca9]{margin-right:%?12?%}.page_content .mobile_popup .input_box .area .tlabel .text1[data-v-17ebaca9]{font-size:%?24?%;color:#999}.page_content .mobile_popup .input_box .area .tlabel .text2[data-v-17ebaca9]{font-size:%?28?%;margin-top:%?4?%}.page_content .mobile_popup .input_box .send[data-v-17ebaca9]{font-size:%?28?%;color:#000;padding:%?20?% 0;position:absolute;top:50%;right:0;z-index:10;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.page_content .mobile_popup .button_box[data-v-17ebaca9]{margin-top:%?70?%;display:flex;align-items:center;justify-content:space-between}',""]),t.exports=e},ed9b:function(t,e,a){var n=a("d632");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("abbd1334",n,!0,{sourceMap:!1,shadowMode:!1})}}]);