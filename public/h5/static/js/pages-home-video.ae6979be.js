(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-video"],{"25a3":function(t,e,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("99af"),i("ac1f"),i("466d"),i("b65f");var a=n(i("5530")),o=i("26cb"),r={data:function(){return{isIos:"ios"==uni.getSystemInfoSync().osName,barHeight:uni.getSystemInfoSync().statusBarHeight,current:0,currentTime:0,duration:0,isDrag:!1,dragStarTime:"00:00",dragEndTime:"00:00",isPlaying:!1,isPlayError:!1,clickNum:0,clickTimer:null,isUnfold:!1,originData:[],originIndex:0,oldIndex:0,videoData:[],videoIndex:0,isLandscape:!1,countdown:0,videoAd:null,isLoaded:!1}},computed:(0,a.default)((0,a.default)({},(0,o.mapGetters)("user",["token","userInfo","showAd"])),(0,o.mapGetters)("app",["adCountdown","config","lang"])),watch:{adCountdown:function(t,e){this.countdown=t},lang:function(t,e){t&&(this.originData=[],this.originIndex=0,this.oldIndex=0,this.videoData=[],this.videoIndex=0,this.getRecommendList())}},onLoad:function(){this.getRecommendList()},onShow:function(){this.originData.length&&this.videoPlay()},methods:(0,a.default)((0,a.default)({},(0,o.mapMutations)("user",["setShowLogin"])),{},{getRecommendList:function(){var t=this;this.$request("video.recommend").then((function(e){1===e.code&&e.data&&e.data.length&&(t.originData=t.originData.concat(e.data),t.initSwiperData(t.originIndex,1))}))},initSwiperData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.originIndex,i=this.originData.length,n=[];n[this.videoIndex]=this.originData[e],n[this.videoIndex-1==-1?2:this.videoIndex-1]=this.originData[e-1==-1?i-1:e-1],n[this.videoIndex+1==3?0:this.videoIndex+1]=this.originData[e+1==i?0:e+1],this.videoData=n,this.oldIndex>=this.originData.length&&(this.oldIndex=0),this.oldIndex<0&&(this.oldIndex=this.originData.length-1),this.duration=0,this.currentTime=0,this.isDrag=!1,this.isPlayError=!1;var a=window.navigator.userAgent.toLowerCase();if("micromessenger"==a.match(/MicroMessenger/i)&&"ios"==uni.getSystemInfoSync().platform)WeixinJSBridge.invoke("getNetworkType",{},(function(e){t.videoPlay()}));else var o=setTimeout((function(){t.videoPlay(),clearTimeout(o)}),500);this.handleViews(this.videoData[this.videoIndex].vid,this.videoData[this.videoIndex].id)},swiperChange:function(t){var e=t.detail.current,i=this.originData.length;this.videoIndex-e==2||this.videoIndex-e==-1?(this.originIndex=this.originIndex+1==i?0:this.originIndex+1,this.videoIndex=this.videoIndex+1==3?0:this.videoIndex+1,this.oldIndex=this.originIndex-1,this.initSwiperData(this.originIndex),this.originIndex==this.originData.length-1&&this.getRecommendList()):this.videoIndex-e!=-2&&this.videoIndex-e!=1||(this.originIndex=this.originIndex-1==-1?i-1:this.originIndex-1,this.videoIndex=this.videoIndex-1==-1?2:this.videoIndex-1,this.oldIndex=this.originIndex+1,this.initSwiperData(this.originIndex))},videoPlay:function(){var t=this.getVideoCtx();t&&t.play()},videoPause:function(){var t=this.getVideoCtx();t&&t.pause()},videoEnded:function(t){this.videoIndex<2?this.current=this.videoIndex+1:this.current=0},videoError:function(){this.isPlayError=!0},videoClick:function(){var t=this;this.clickTimer&&clearTimeout(this.clickTimer),this.clickNum++,this.clickTimer=setTimeout((function(){t.clickNum>=2||(t.isPlaying?t.videoPause():t.videoPlay()),t.clickNum=0}),250)},VideoLoadedmetadata:function(t){var e=t.detail,i=e.width,n=e.height;this.isLandscape=i>=n},sliderChange:function(t){var e=this.getVideoCtx();e&&(this.isDrag=!1,this.duration>.1&&(e.seek(t.detail.value),e.play()))},sliderChanging:function(t){this.isDrag=!0,this.dragStarTime=this.$utils.formatTime(t.detail.value),this.dragEndTime=this.$utils.formatTime(this.duration)},videoTimeUpdate:function(t){if(!this.isDrag){var e=t.detail,i=e.currentTime,n=e.duration;this.currentTime=Math.trunc(i),this.duration=Math.trunc(n),this.dragStarTime=this.$utils.formatTime(this.currentTime),this.dragEndTime=this.$utils.formatTime(this.duration)}},getVideoCtx:function(){return uni.createVideoContext("video"+this.originData[this.originIndex].id,this)},handleLikes:function(t,e){var i=this,n={episode_id:t,type:"like"};this.$request("video.likes",n,!1).then((function(t){1===t.code&&(i.videoData[e].is_like=0==i.videoData[e].is_like?1:0,i.videoData[e].likes=t.data.likes)}))},handleCollect:function(t,e){var i=this;if(0==this.videoData[e].video.is_favorite){var n={vid:t,type:"favorite"};this.$request("video.addRecord",n,!1).then((function(t){1===t.code&&(i.videoData[e].video.is_favorite=1,i.videoData[e].video.favorites=t.data.favorites)}))}else{var a={ids:t,type:"favorite"};this.$request("video.deleteRecord",a,!1).then((function(t){1===t.code&&(i.videoData[e].video.is_favorite=0,i.videoData[e].video.favorites=t.data.favorites)}))}},handleViews:function(t,e){t&&e&&this.$request("video.views",{vid:t,episode_id:e},!1)}})};e.default=r},"468a":function(t,e,i){"use strict";var n=i("cfd9"),a=i.n(n);a.a},9319:function(t,e,i){"use strict";i.r(e);var n=i("25a3"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},b65f:function(t,e,i){var n=i("23e7"),a=i("b42e");n({target:"Math",stat:!0},{trunc:a})},c8c7:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.page_content .ad_box[data-v-cb62b8fc]{position:absolute;bottom:%?80?%;right:%?30?%;z-index:1}.page_content .ad_box .button[data-v-cb62b8fc]{width:%?80?%;height:%?80?%;border-radius:50%;background:transparent;outline:none;background-image:url(https://img.nymaite.com/video_short/icons/jifen.png);background-size:cover}.page_content .main_content[data-v-cb62b8fc]{position:relative;background:#000}.page_content .main_content .swiper[data-v-cb62b8fc]{width:100%;height:100%;background:#000;border-radius:%?16?%;overflow:hidden}.page_content .main_content .swiper .swiper_item[data-v-cb62b8fc]{position:relative;color:#fff}.page_content .main_content .swiper .swiper_item .videos[data-v-cb62b8fc]{width:100%;height:100%;position:relative}.page_content .main_content .swiper .swiper_item .videos .video[data-v-cb62b8fc]{width:100%;height:100%;border-radius:%?16?%;overflow:hidden}.page_content .main_content .swiper .swiper_item .videos .verror[data-v-cb62b8fc]{width:100%;height:100%;background:#000;position:absolute;top:0;left:0;z-index:1}.page_content .main_content .swiper .swiper_item .videos .verror .image[data-v-cb62b8fc]{width:100%;height:100%;opacity:.3}.page_content .main_content .swiper .swiper_item .videos .verror .content[data-v-cb62b8fc]{width:100%;position:absolute;top:50%;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%);display:flex;flex-direction:column;align-items:center}.page_content .main_content .swiper .swiper_item .videos .verror .content .text[data-v-cb62b8fc]{font-size:%?32?%;color:#fff;margin-top:%?40?%}.page_content .main_content .swiper .swiper_item .vcover[data-v-cb62b8fc]{width:100%;height:100%}.page_content .main_content .swiper .swiper_item .vcover .image[data-v-cb62b8fc]{width:100%;height:100%;opacity:.3}.page_content .main_content .swiper .swiper_item .buttons[data-v-cb62b8fc]{position:absolute;top:50%;left:50%;z-index:0;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);pointer-events:auto}.page_content .main_content .swiper .swiper_item .sidebar[data-v-cb62b8fc]{position:absolute;right:%?30?%;bottom:%?260?%;z-index:1}.page_content .main_content .swiper .swiper_item .sidebar .item[data-v-cb62b8fc]{margin-bottom:%?40?%;text-align:center;display:flex;flex-direction:column;align-items:center}.page_content .main_content .swiper .swiper_item .sidebar .item[data-v-cb62b8fc]:last-child{margin-bottom:0}.page_content .main_content .swiper .swiper_item .sidebar .item .image[data-v-cb62b8fc]{width:%?70?%;margin:0 auto;opacity:.9}.page_content .main_content .swiper .swiper_item .sidebar .item .text[data-v-cb62b8fc]{font-size:%?28?%}.page_content .main_content .swiper .swiper_item .sidebar .item .text.active[data-v-cb62b8fc]{color:#ee7f33}.page_content .main_content .swiper .swiper_item .sidebar .item .btn[data-v-cb62b8fc]{display:block;background:transparent;color:#fff;box-sizing:border-box;font-size:%?28?%;line-height:%?40?%}.page_content .main_content .swiper .swiper_item .sidebar .item .btn[data-v-cb62b8fc]::after{display:none}.page_content .main_content .swiper .swiper_item .infobox[data-v-cb62b8fc]{width:100%;position:absolute;bottom:%?60?%;left:0;z-index:1;font-size:%?32?%;padding:0 %?30?%}.page_content .main_content .swiper .swiper_item .infobox .title[data-v-cb62b8fc]{font-weight:700;margin-bottom:%?20?%}.page_content .main_content .swiper .swiper_item .infobox .textarea[data-v-cb62b8fc]{margin-bottom:%?20?%;display:flex;flex-direction:row;overflow:hidden;font-size:%?30?%;min-height:%?80?%}.page_content .main_content .swiper .swiper_item .infobox .textarea .text[data-v-cb62b8fc]{width:100%;display:-webkit-box;-webkit-box-orient:vertical;text-overflow:ellipsis;-webkit-line-clamp:2;overflow:hidden;text-align:justify;word-break:break-all;position:relative;line-height:%?40?%}.page_content .main_content .swiper .swiper_item .infobox .textarea .text.active[data-v-cb62b8fc]{-webkit-line-clamp:999}.page_content .main_content .swiper .swiper_item .infobox .textarea .text[data-v-cb62b8fc]::before{content:"";float:right;width:0;height:100%;background:#000;overflow:hidden;margin-bottom:%?-40?%}.page_content .main_content .swiper .swiper_item .infobox .textarea .text .btn[data-v-cb62b8fc]{float:right;clear:both;background:transparent;border:none;color:#fff;line-height:%?40?%}.page_content .main_content .swiper .swiper_item .infobox .content[data-v-cb62b8fc]{display:flex;flex-direction:row;align-items:center}.page_content .main_content .swiper .swiper_item .infobox .content .text1[data-v-cb62b8fc]{margin-left:%?16?%}.page_content .main_content .swiper .swiper_item .infobox .content .text2[data-v-cb62b8fc]{text-decoration:underline}.page_content .main_content .swiper .swiper_item .progress[data-v-cb62b8fc]{width:100%;position:absolute;bottom:%?10?%;left:0;z-index:1}.page_content .main_content .swiper .swiper_item .progress uni-slider[data-v-cb62b8fc]{margin:0 %?36?%}.page_content .main_content .swiper .swiper_item .progress uni-slider[data-v-cb62b8fc]{margin:0 %?36?%}.page_content .main_content .swiper .swiper_item .progress .bartext[data-v-cb62b8fc]{display:flex;flex-direction:row;justify-content:center;font-size:%?40?%;margin-bottom:%?60?%;font-weight:700}.page_content .main_content .swiper .swiper_item .progress .bartext .text0[data-v-cb62b8fc]{padding:0 %?8?%}.page_content .main_content .swiper .swiper_item .progress .bartext .text2[data-v-cb62b8fc]{color:hsla(0,0%,100%,.5)}.page_content .main_content .swiper .swiper_item .progress .barview[data-v-cb62b8fc]  .uni-slider-handle-wrapper .uni-slider-handle,\r\n.page_content .main_content .swiper .swiper_item .progress .barview[data-v-cb62b8fc]  .wx-slider-handle-wrapper .wx-slider-handle{width:%?64?%!important;height:%?64?%!important;margin-left:%?-32?%!important;margin-top:%?-32?%!important}.page_content .main_content .swiper .swiper_item .progress .barview[data-v-cb62b8fc]  .uni-slider-handle-wrapper,\r\n.page_content .main_content .swiper .swiper_item .progress .barview[data-v-cb62b8fc]  .wx-slider-handle-wrapper{height:%?4?%;transition:all .3s}.page_content .main_content .swiper .swiper_item .progress .barview[data-v-cb62b8fc]  .uni-slider-handle-wrapper .uni-slider-thumb,\r\n.page_content .main_content .swiper .swiper_item .progress .barview[data-v-cb62b8fc]  .wx-slider-handle-wrapper .wx-slider-thumb{width:%?12?%!important;height:%?12?%!important;margin-left:%?-6?%!important;margin-top:%?-6?%!important}.page_content .main_content .swiper .swiper_item .progress .barview.active[data-v-cb62b8fc]  .uni-slider-handle-wrapper,\r\n.page_content .main_content .swiper .swiper_item .progress .barview.active[data-v-cb62b8fc]  .wx-slider-handle-wrapper{height:%?24?%;transition:all .3s}.page_content .main_content .swiper .swiper_item .progress .barview.active[data-v-cb62b8fc]  .uni-slider-handle-wrapper .uni-slider-thumb,\r\n.page_content .main_content .swiper .swiper_item .progress .barview.active[data-v-cb62b8fc]  .wx-slider-handle-wrapper .wx-slider-thumb{width:%?32?%!important;height:%?32?%!important;margin-left:%?-16?%!important;margin-top:%?-16?%!important}',""]),t.exports=e},cfd9:function(t,e,i){var n=i("c8c7");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("75cd0ccf",n,!0,{sourceMap:!1,shadowMode:!1})},fc9f:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uIcon:i("5f9d").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page_content"},[i("v-uni-view",{staticClass:"main_content",style:[{paddingTop:t.barHeight+"px"}]},[i("v-uni-swiper",{staticClass:"swiper",attrs:{circular:!0,vertical:!0,duration:300,current:t.current},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.swiperChange.apply(void 0,arguments)}}},t._l(t.videoData,(function(e,n){return i("v-uni-swiper-item",{key:n,staticClass:"swiper_item"},[t.videoIndex==n?i("v-uni-view",{staticClass:"videos",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.videoClick.apply(void 0,arguments)}}},[i("v-uni-video",{ref:"video"+e.id,refInFor:!0,staticClass:"video",attrs:{id:"video"+e.id,loop:!1,controls:!1,autoplay:!1,"object-fit":t.isLandscape?"contain":"cover","enable-progress-gesture":!0,"show-center-play-btn":!1,src:e.url,poster:e.image},on:{play:function(e){arguments[0]=e=t.$handleEvent(e),t.isPlaying=!0,t.isPlayError=!1},pause:function(e){arguments[0]=e=t.$handleEvent(e),t.isPlaying=!1},timeupdate:function(e){arguments[0]=e=t.$handleEvent(e),t.videoTimeUpdate.apply(void 0,arguments)},ended:function(e){arguments[0]=e=t.$handleEvent(e),t.videoEnded.apply(void 0,arguments)},error:function(e){arguments[0]=e=t.$handleEvent(e),t.videoError.apply(void 0,arguments)},loadedmetadata:function(e){arguments[0]=e=t.$handleEvent(e),t.VideoLoadedmetadata.apply(void 0,arguments)}}}),t.isPlayError?i("v-uni-view",{staticClass:"verror"},[i("v-uni-image",{staticClass:"image",attrs:{src:e.image,mode:"aspectFill"}}),i("v-uni-view",{staticClass:"content"},[i("u-icon",{attrs:{name:"info-circle-fill",color:"#fff",size:"50"}}),i("v-uni-text",{staticClass:"text"},[t._v(t._s(t.$t("video.error")))])],1)],1):t._e()],1):i("v-uni-view",{staticClass:"vcover"},[i("v-uni-image",{staticClass:"image",attrs:{src:e.image,mode:"aspectFill"}})],1),t.isDrag||t.isPlayError||t.videoIndex!=n?t._e():i("v-uni-view",{staticClass:"buttons"},[t.isPlaying?t._e():i("u-icon",{attrs:{name:"play-right-fill",color:"rgba(255, 255, 255, 0.8)",size:60},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.videoPlay.apply(void 0,arguments)}}})],1),t.isDrag||t.isPlayError||t.videoIndex!=n?t._e():i("v-uni-view",{staticClass:"sidebar"},[i("v-uni-view",{staticClass:"item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleLikes(e.id,n)}}},[i("v-uni-image",{staticClass:"image",attrs:{src:"https://img.nymaite.com/video_short/icons/likes_"+(e.is_like?1:0)+".png",mode:"widthFix"}}),i("v-uni-text",{staticClass:"text",class:{active:e.is_like}},[t._v(t._s(e.likes))])],1),i("v-uni-view",{staticClass:"item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleCollect(e.vid,n)}}},[i("u-icon",{attrs:{name:"star-fill",color:e.video.is_favorite?"#E17B37":"#F5F5F5",size:"32"}}),i("v-uni-text",{staticClass:"text",class:{active:e.video.is_favorite}},[t._v(t._s(e.video.favorites))])],1)],1),t.isDrag||t.videoIndex!=n?t._e():i("v-uni-view",{staticClass:"infobox"},[i("v-uni-view",{staticClass:"title"},[t._v(t._s(e.video.title))]),i("v-uni-view",{staticClass:"content"},[i("u-icon",{attrs:{name:"play-right-fill",color:"#fff",size:"18"}}),i("v-uni-text",{staticClass:"text1"},[t._v(t._s(e.name)+" / "+t._s(t.$t("video.total",e.video.episodes)))]),i("v-uni-text",{staticClass:"text2",staticStyle:{"margin-left":"20rpx"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openVideoDetail(e.video.id)}}},[t._v(t._s(t.$t("video.more")))])],1)],1),t.duration>0&&t.videoIndex==n?i("v-uni-view",{staticClass:"progress"},[t.isDrag?i("v-uni-view",{staticClass:"bartext"},[i("v-uni-text",{staticClass:"text1"},[t._v(t._s(t.dragStarTime))]),i("v-uni-text",{staticClass:"text0"},[t._v("/")]),i("v-uni-text",{staticClass:"text2"},[t._v(t._s(t.dragEndTime))])],1):t._e(),i("v-uni-view",{staticClass:"barview",class:{active:t.isDrag}},[i("v-uni-slider",{attrs:{value:t.currentTime,min:0,max:t.duration,blockSize:6,backgroundColor:"#333",activeColor:"#fff"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.sliderChange.apply(void 0,arguments)},changing:function(e){arguments[0]=e=t.$handleEvent(e),t.sliderChanging.apply(void 0,arguments)}}})],1)],1):t._e()],1)})),1)],1),i("CustomLogin"),i("CustomTabbar",{attrs:{selected:2}})],1)},o=[]},fe2a:function(t,e,i){"use strict";i.r(e);var n=i("fc9f"),a=i("9319");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("468a");var r=i("f0c5"),s=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"cb62b8fc",null,!1,n["a"],void 0);e["default"]=s.exports}}]);